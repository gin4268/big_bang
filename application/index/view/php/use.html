<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>php</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
<link rel="stylesheet" href="__CSS__/my.css">
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushBash.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushCpp.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushCSharp.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushCss.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushDelphi.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushDiff.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushGroovy.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushJava.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushJScript.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushPhp.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushPlain.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushPython.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushRuby.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushScala.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushSql.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushVb.js"></script>
<script type="text/javascript" src="__JS__/syntaxhighlighter/scripts/shBrushXml.js"></script>
<link type="text/css" rel="stylesheet" href="__JS__/syntaxhighlighter/styles/shCore.css"/>
<link type="text/css" rel="stylesheet" href="__JS__/syntaxhighlighter/styles/shThemeDefault.css"/>
<script type="text/javascript" src="__JS__/jquery-3.1.1.min.js"></script>
<script type="text/javascript" src="__JS__/function.js"></script>
<script type="text/javascript">
	SyntaxHighlighter.config.clipboardSwf = '__JS__/syntaxhighlighter/scripts/clipboard.swf';
	SyntaxHighlighter.all();
</script>
<body>
	<div name='title' class='top1'>
		<p class='title1'>PHP</p>
		<p class='line1'></p>
	</div>
<a href="javascript:scrollTo(0,0);" class='totop'>顶部↑</a>
<div class='acard'>
	<a href="#note1">路径</a>
	<a href="#note2">时间</a>
	<a href="#note3">处理乱码</a>
	<a href="#note4">数组</a>
	<a href="#note5">配置httpd.conf</a>
	<a href="#note6">curl发送app推送</a>
	<a href="#note7">删除最后一位字符</a>
</div>

<div id='note1' name='contentcard1' class='width1'>
		<div name='littletitle' class='title2'>路径：</div>
		<div name='content' class='width2'>
<pre class="brush: c-sharp;">
$_SERVER['HTTP_HOST']
</pre>
			<div class='content1'>解释说明：
				<div class='mark1'>
					获取服务器地址,如localhost,非80端口时,可能会输出localhost:70
				</div>
			</div>
		</div>
	</div>
<p class='line2'></p>

<div id='note2' name='contentcard1' class='width1'>
		<div name='littletitle' class='title2'>时间：</div>
		<div name='content' class='width2'>
// 获取服务器时间
<pre class="brush: c-sharp;">
$_SERVER['REQUEST_TIME'];
</pre>
// 格式化时间
<pre class="brush: c-sharp;">
date('Y-m-d H:i:s',time());
</pre>
			<div class='content1'>解释说明：
				<div class='mark1'>
				</div>
			</div>
		</div>
	</div>
<p class='line2'></p>

<div id='note3' name='contentcard1' class='width1'>
		<div name='littletitle' class='title2'>处理乱码：绛惧殍</div>
		<div name='content' class='width2'>
<pre class="brush: c-sharp;">
$str = iconv("UTF-8", "GBK", $str);
</pre>
			<div class='content1'>解释说明：
				<div class='mark1'>

				</div>
			</div>
		</div>
	</div>
<p class='line2'></p>

<div id='note4' name='contentcard1' class='width1'>
		<div name='littletitle' class='title2'>数组：</div>
		<div name='content' class='width2'>
// 合并数组
<pre class="brush: c-sharp;">
$arr = array_merge($arr, $arr2);
</pre>
// 删除数组元素
<pre class="brush: c-sharp;">
unset($arr['name']);
</pre>
			<div class='content1'>解释说明：
				<div class='mark1'>
				</div>
			</div>
		</div>
	</div>
<p class='line2'></p>

<div id='note5' name='contentcard1' class='width1'>
		<div name='littletitle' class='title2'>配置httpd.conf：</div>
		<div name='content' class='width2'>
// 配置服务器虚拟目录的位置
<pre class="brush: c-sharp;">
DocumentRoot
</pre>
// 配置默认访问的文件
<pre class="brush: c-sharp;">
DirectoryIndex
</pre>
			<div class='content1'>解释说明：
				<div class='mark1'>
				</div>
			</div>
		</div>
	</div>
<p class='line2'></p>

<div id='note6' name='contentcard1' class='width1'>
		<div name='littletitle' class='title2'>curl发送app推送：</div>
		<div name='content' class='width2'>
<pre class="brush: c-sharp;">
public function push2(){
	$request=Request::instance()->param();
	if(!empty($request['appKey'])){
		$title='测试';
		$content='测试测试';
		$data['title'] = $title;
		$data['content'] = $content;
		$data['type'] = 2;
		$data['platform'] = 0;
		// $data2['body'] = json_encode($data);
		$url = 'https://p.apicloud.com/api/push/message';//接收地址
		$header['X-APICloud-AppId'] = 'A6060013619380';
		$header['X-APICloud-AppKey'] = $request['appKey'];
		$header = array(
            'X-APICloud-AppId:'.'A6060013619380',
            'X-APICloud-AppKey:'.$request['appKey']
        );
		$ch = curl_init();  // 初始化curl
		$response=$this->http($url,$data,'POST',$header);
		if($response['status']){
			return $return['state'] = 1;
		}else{
			return $return['state'] = 0;
		}
	}
}
public function http($url, $params, $method = 'GET', $header = array(), $multi = false){
   $opts = array(
      CURLOPT_TIMEOUT => 30,
      CURLOPT_RETURNTRANSFER => 1,
      CURLOPT_SSL_VERIFYPEER => false,
      CURLOPT_SSL_VERIFYHOST => false,
      CURLOPT_HTTPHEADER => $header
   );
   /* 根据请求类型设置特定参数 */
   switch(strtoupper($method)){
     case 'GET':
        $opts[CURLOPT_URL] = $url . '?' . http_build_query($params);
        $opts[CURLOPT_USERAGENT]='Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.101 Safari/537.36';
     break;
     case 'POST':
        //判断是否传输文件
        $params = $multi ? $params : http_build_query($params);
        $opts[CURLOPT_URL] = $url;
        $opts[CURLOPT_POST] = 1;
        $opts[CURLOPT_POSTFIELDS] = $params;
     break;
     default:
        throw new Exception('不支持的请求方式！');
   }
   /* 初始化并执行curl请求 */
   $ch = curl_init();
   curl_setopt_array($ch, $opts);
   $data = curl_exec($ch);
   $error = curl_error($ch);
   curl_close($ch);
   if($error) throw new Exception('请求发生错误：' . $error);
   return $data;
}
</pre>
			<div class='content1'>解释说明：
				<div class='mark1'>
				</div>
			</div>
		</div>
	</div>
<p class='line2'></p>

<div id='note7' name='contentcard1' class='width1'>
		<div name='littletitle' class='title2'>删除最后一位字符：</div>
		<div name='content' class='width2'>
<pre class="brush: c-sharp;">
$rate_id = rtrim($rate_id, ",");
$rate_id = substr($rate_id, 0, -1);
</pre>
			<div class='content1'>解释说明：
				<div class='mark1'>
				</div>
			</div>
		</div>
	</div>
<p class='line2'></p>

<!-- <div id='note' name='contentcard1' class='width1'>
		<div name='littletitle' class='title2'>：</div>
		<div name='content' class='width2'>
<pre class="brush: c-sharp;">

</pre>
			<div class='content1'>解释说明：
				<div class='mark1'>
				</div>
			</div>
		</div>
	</div>
<p class='line2'></p> -->


</body>
</html>
